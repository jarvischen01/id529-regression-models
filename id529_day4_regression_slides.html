<!DOCTYPE html>
<html lang="en"><head>
<script src="id529_day4_regression_slides_files/libs/clipboard/clipboard.min.js"></script>
<script src="id529_day4_regression_slides_files/libs/quarto-html/tabby.min.js"></script>
<script src="id529_day4_regression_slides_files/libs/quarto-html/popper.min.js"></script>
<script src="id529_day4_regression_slides_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="id529_day4_regression_slides_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="id529_day4_regression_slides_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="id529_day4_regression_slides_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="id529_day4_regression_slides_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.450">

  <title>id529_day4_regression_slides</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="id529_day4_regression_slides_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="id529_day4_regression_slides_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="id529_day4_regression_slides_files/libs/revealjs/dist/theme/quarto.css">
  <link href="id529_day4_regression_slides_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="id529_day4_regression_slides_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="id529_day4_regression_slides_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="id529_day4_regression_slides_files/libs/revealjs/plugin/reveal-pointer/pointer.css" rel="stylesheet">
  <link href="id529_day4_regression_slides_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">


<section>
<section id="regression-modeling-workflows" class="title-slide slide level1 smaller center">
<h1>Regression modeling workflows</h1>
<p>ID 529: Data Management and Analytic Workflows in R</p>
<p>Jarvis Chen</p>
<p><br></p>
<hr>
<p><br></p>
<p>Thursday, January 11, 2024</p>
</section>
<section id="follow-along" class="slide level2 smaller">
<h2>Follow along</h2>
<br> <br>
<center>
<p>https://bit.ly/id529_regression_models <br> <br></p>
<ul>
<li><p>Clone the repository and open it as a <code>R</code> Project in your RStudio.</p></li>
<li><p>Open the <code>id529\_day4\_regression\_models.R</code> script. You can follow along, annotate, and/or run the code in your own R session.</p></li>
</ul>
</center></section>
<section id="section" class="slide level2">
<h2></h2>

<img data-src="images/modelbuilding_workflow.png" class="r-stretch"></section>
<section id="section-1" class="slide level2">
<h2></h2>

<img data-src="images/modelbuilding_details.png" class="r-stretch"></section>
<section id="some-goals-for-today" class="slide level2 smaller">
<h2>Some goals for today</h2>
<p><br></p>
<div>
<ul>
<li class="fragment"><p>Practice reading someone else’s <code>R</code> code and annotating to help you understand what is going on</p></li>
<li class="fragment"><p>Review and consolidate some of the concepts we’ve been learning about</p>
<ul>
<li class="fragment">Use a <code>dplyr</code> workflow to prepare our dataset for analysis</li>
<li class="fragment">Write a quick function (using concepts of <strong>functional programming</strong>)</li>
<li class="fragment">Use <code>ggplot</code> to make a figure</li>
</ul></li>
<li class="fragment"><p>Fit some regression models</p>
<ul>
<li class="fragment"><code>lm()</code> for linear regression</li>
<li class="fragment"><code>glm()</code> for generalized linear regression</li>
<li class="fragment">What arguments do these functions take?</li>
<li class="fragment">What is contained in the resulting model objects?</li>
</ul></li>
</ul>
</div>
</section>
<section id="some-goals-for-today-1" class="slide level2 smaller">
<h2>Some goals for today</h2>
<div>
<ul>
<li class="fragment"><p>Learn how to extract output of interest from model objects</p>
<ul>
<li class="fragment">using base <code>R</code></li>
<li class="fragment">using <code>broom::tidy</code>, <code>broom::augment</code>, and <code>broom::glance</code></li>
</ul></li>
<li class="fragment"><p>Learn how to create some pretty tables</p>
<ul>
<li class="fragment">Learn about the <code>gtsummary</code> package</li>
</ul></li>
</ul>
</div>
</section>
<section id="priority-list" class="slide level2 smaller">
<h2>Priority List</h2>
<p><br></p>
<p>What to prioritize in understanding the code in the example</p>
<ul>
<li><p><span style="color: purple;">Using <code>dplyr</code> code for data cleaning/management </span></p></li>
<li><p><span style="color: purple;">Calling <code>lm()</code> and <code>glm()</code> </span></p></li>
<li><p><span style="color: purple;">Using <code>summary()</code>, <code>coef()</code>, <code>confint()</code>, and <code>broom::tidy()</code> to extract and summarize coefficients. </span></p></li>
<li><p><span style="color: #D883B7;">Writing our own function to extract coefficients and output to a tibble </span></p></li>
<li><p><span style="color: #D883B7;">Using <code>anova</code> to compare models` </span></p></li>
<li><p><span style="color: grey;">Using <code>predict()</code> and <code>broom::augment()</code> to extract predictions and residuals` </span></p></li>
<li><p><span style="color: grey;">Using <code>broom::glance</code> to extract model fit statistics` </span></p></li>
</ul>

<aside><div>
<p>We’ll talk about using <code>gtsummary</code> to generate pretty tables and <code>ggplot</code> to visualize regression output tomorrow!</p>
</div></aside></section>
<section id="data-preparation" class="slide level2 smaller">
<h2>Data preparation</h2>
<ul>
<li>For this example, we will use the NHANES data from the <code>NHANES</code> package. Note that this is <strong>different</strong> from the <code>nhanes_id529</code> data in the <code>ID529data</code> package.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>df <span class="ot">&lt;-</span> NHANES  <span class="sc">|&gt;</span>  </span>
<span id="cb1-2"><a href="#cb1-2"></a>  <span class="co"># Remember that we have to restrict to people 25 and above</span></span>
<span id="cb1-3"><a href="#cb1-3"></a>  <span class="fu">filter</span>(Age<span class="sc">&gt;=</span><span class="dv">25</span>)  <span class="sc">|&gt;</span> </span>
<span id="cb1-4"><a href="#cb1-4"></a>  <span class="co"># recoding of the variables we're going to use</span></span>
<span id="cb1-5"><a href="#cb1-5"></a>  <span class="fu">mutate</span>(<span class="at">agecat =</span> <span class="fu">case_when</span>(</span>
<span id="cb1-6"><a href="#cb1-6"></a>      Age <span class="sc">&lt;</span> <span class="dv">35</span> <span class="sc">~</span> <span class="st">"25-34"</span>,</span>
<span id="cb1-7"><a href="#cb1-7"></a>      <span class="dv">35</span> <span class="sc">&lt;=</span> Age <span class="sc">&amp;</span> Age <span class="sc">&lt;</span> <span class="dv">45</span> <span class="sc">~</span> <span class="st">"35-44"</span>,</span>
<span id="cb1-8"><a href="#cb1-8"></a>      Age <span class="sc">&gt;=</span> <span class="dv">45</span> <span class="sc">&amp;</span> Age <span class="sc">&lt;</span> <span class="dv">55</span> <span class="sc">~</span> <span class="st">"45-54"</span>,</span>
<span id="cb1-9"><a href="#cb1-9"></a>      Age <span class="sc">&gt;=</span> <span class="dv">55</span> <span class="sc">&amp;</span> Age <span class="sc">&lt;</span> <span class="dv">65</span> <span class="sc">~</span> <span class="st">"55-64"</span>,</span>
<span id="cb1-10"><a href="#cb1-10"></a>      Age <span class="sc">&gt;=</span> <span class="dv">65</span> <span class="sc">&amp;</span> Age <span class="sc">&lt;</span> <span class="dv">75</span> <span class="sc">~</span> <span class="st">"65-74"</span>,</span>
<span id="cb1-11"><a href="#cb1-11"></a>      Age <span class="sc">&gt;=</span> <span class="dv">75</span> <span class="sc">~</span> <span class="st">"75+"</span>),</span>
<span id="cb1-12"><a href="#cb1-12"></a>    <span class="co"># We want College Grad to be the reference category for education, so we'll</span></span>
<span id="cb1-13"><a href="#cb1-13"></a>    <span class="co"># re-order the factor so that it is reversed from the way it came in the NHANES dataset</span></span>
<span id="cb1-14"><a href="#cb1-14"></a>    <span class="at">Education =</span> <span class="fu">factor</span>(Education, </span>
<span id="cb1-15"><a href="#cb1-15"></a>                       <span class="at">levels=</span><span class="fu">rev</span>(<span class="fu">levels</span>(NHANES<span class="sc">$</span>Education))),</span>
<span id="cb1-16"><a href="#cb1-16"></a>    <span class="co"># Here we collapse Hispanic and Mexican into the Hispanic category</span></span>
<span id="cb1-17"><a href="#cb1-17"></a>    <span class="at">racecat =</span> <span class="fu">factor</span>(<span class="fu">case_when</span>(</span>
<span id="cb1-18"><a href="#cb1-18"></a>      Race1 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Hispanic"</span>, <span class="st">"Mexican"</span>) <span class="sc">~</span> <span class="st">"Hispanic"</span>,</span>
<span id="cb1-19"><a href="#cb1-19"></a>      Race1 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Asian"</span>, <span class="st">"Other"</span>) <span class="sc">~</span> <span class="st">"Other Non-Hispanic"</span>,</span>
<span id="cb1-20"><a href="#cb1-20"></a>      Race1 <span class="sc">==</span> <span class="st">"Black"</span> <span class="sc">~</span> <span class="st">"Black Non-Hispanic"</span>,</span>
<span id="cb1-21"><a href="#cb1-21"></a>      Race1 <span class="sc">==</span> <span class="st">"White"</span> <span class="sc">~</span> <span class="st">"White Non-Hispanic"</span>), </span>
<span id="cb1-22"><a href="#cb1-22"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"White Non-Hispanic"</span>, <span class="st">"Black Non-Hispanic"</span>, <span class="st">"Hispanic"</span>, <span class="st">"Other Non-Hispanic"</span>))</span>
<span id="cb1-23"><a href="#cb1-23"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb1-24"><a href="#cb1-24"></a>  <span class="co"># select just variables we are going to use in the analysis</span></span>
<span id="cb1-25"><a href="#cb1-25"></a>  <span class="fu">select</span>(ID, SurveyYr, Gender, Age, agecat, Education, racecat, BPSysAve, SmokeNow)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="a-basic-call-to-lm" class="slide level2 smaller">
<h2>A basic call to lm()</h2>
<ul>
<li>You’ve probably seen something like this in a basic statistics class</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>lm_model1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(BPSysAve <span class="sc">~</span> <span class="fu">factor</span>(Education), </span>
<span id="cb2-2"><a href="#cb2-2"></a>              <span class="at">data=</span>df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p>This creates an object called <code>lm_model1</code> where we are storing the results of having fit a linear regression model with <code>BPSysAve</code> as the dependent variable and categories of <code>Education</code> as the independent variables.</p></li>
<li><p>To see the actual results, we have to do something like</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">print</span>(lm_model1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = BPSysAve ~ factor(Education), data = df)

Coefficients:
                    (Intercept)    factor(Education)Some College  
                        118.563                            3.750  
   factor(Education)High School  factor(Education)9 - 11th Grade  
                          5.140                            4.688  
     factor(Education)8th Grade  
                          7.921  </code></pre>
</div>
</div>
</section>
<section id="summarizing-the-model-object" class="slide level2 smaller">
<h2>Summarizing the model object</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">summary</span>(lm_model1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = BPSysAve ~ factor(Education), data = df)

Residuals:
    Min      1Q  Median      3Q     Max 
-45.252 -11.563  -1.703   8.686 103.686 

Coefficients:
                                Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                     118.5634     0.3907 303.467  &lt; 2e-16 ***
factor(Education)Some College     3.7503     0.5588   6.712 2.09e-11 ***
factor(Education)High School      5.1401     0.6190   8.303  &lt; 2e-16 ***
factor(Education)9 - 11th Grade   4.6882     0.7268   6.451 1.20e-10 ***
factor(Education)8th Grade        7.9206     0.9414   8.414  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 17.28 on 6319 degrees of freedom
  (247 observations deleted due to missingness)
Multiple R-squared:  0.01887,   Adjusted R-squared:  0.01824 
F-statistic: 30.38 on 4 and 6319 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</section>
<section id="other-ways-of-summarizing-the-model" class="slide level2 smaller">
<h2>Other ways of summarizing the model</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">anova</span>(lm_model1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Response: BPSysAve
                    Df  Sum Sq Mean Sq F value    Pr(&gt;F)    
factor(Education)    4   36277  9069.3  30.376 &lt; 2.2e-16 ***
Residuals         6319 1886669   298.6                      
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
</section>
<section id="exploring-the-model-object-more-fully" class="slide level2 smaller">
<h2>Exploring the model object more fully</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">class</span>(lm_model1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "lm"</code></pre>
</div>
</div>
<ul>
<li>It’s an object of class “lm”, but it’s also a list in that it has various elements of different types and different lengths</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="fu">names</span>(lm_model1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "coefficients"  "residuals"     "effects"       "rank"         
 [5] "fitted.values" "assign"        "qr"            "df.residual"  
 [9] "na.action"     "contrasts"     "xlevels"       "call"         
[13] "terms"         "model"        </code></pre>
</div>
</div>
<ul>
<li>Note that <code>summary(lm_model1)</code> is <strong>also</strong> a list that has different elements from <code>lm_model1</code>!</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="fu">names</span>(<span class="fu">summary</span>(lm_model1))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "call"          "terms"         "residuals"     "coefficients" 
 [5] "aliased"       "sigma"         "df"            "r.squared"    
 [9] "adj.r.squared" "fstatistic"    "cov.unscaled"  "na.action"    </code></pre>
</div>
</div>
</section>
<section id="exploring-the-model-object-more-fully-1" class="slide level2 smaller">
<h2>Exploring the model object more fully</h2>
<ul>
<li>Note the difference between the list item called <code>coefficients</code> in the <code>lm_model1</code> object and the list item called <code>coefficients</code> in the <code>summary(lm_model1)</code> object</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>lm_model1<span class="sc">$</span>coefficients</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                    (Intercept)   factor(Education)Some College 
                     118.563395                        3.750341 
   factor(Education)High School factor(Education)9 - 11th Grade 
                       5.140080                        4.688178 
     factor(Education)8th Grade 
                       7.920635 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="fu">summary</span>(lm_model1)<span class="sc">$</span>coefficients</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                  Estimate Std. Error    t value     Pr(&gt;|t|)
(Intercept)                     118.563395  0.3906963 303.466895 0.000000e+00
factor(Education)Some College     3.750341  0.5587681   6.711802 2.089606e-11
factor(Education)High School      5.140080  0.6190317   8.303420 1.225813e-16
factor(Education)9 - 11th Grade   4.688178  0.7267768   6.450643 1.196256e-10
factor(Education)8th Grade        7.920635  0.9413995   8.413681 4.864442e-17</code></pre>
</div>
</div>
</section>
<section id="extracting-quantities-of-interest" class="slide level2 smaller">
<h2>Extracting quantities of interest</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="co"># point estimates</span></span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="fu">coef</span>(lm_model1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                    (Intercept)   factor(Education)Some College 
                     118.563395                        3.750341 
   factor(Education)High School factor(Education)9 - 11th Grade 
                       5.140080                        4.688178 
     factor(Education)8th Grade 
                       7.920635 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="co"># confidence limits</span></span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="fu">confint</span>(lm_model1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                     2.5 %     97.5 %
(Intercept)                     117.797497 119.329292
factor(Education)Some College     2.654966   4.845717
factor(Education)High School      3.926568   6.353593
factor(Education)9 - 11th Grade   3.263448   6.112907
factor(Education)8th Grade        6.075172   9.766097</code></pre>
</div>
</div>
<ul>
<li>We might be interested in looking at the coefficients and their 95% CIs together</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="fu">cbind</span>(<span class="fu">coef</span>(lm_model1), <span class="fu">confint</span>(lm_model1))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                2.5 %     97.5 %
(Intercept)                     118.563395 117.797497 119.329292
factor(Education)Some College     3.750341   2.654966   4.845717
factor(Education)High School      5.140080   3.926568   6.353593
factor(Education)9 - 11th Grade   4.688178   3.263448   6.112907
factor(Education)8th Grade        7.920635   6.075172   9.766097</code></pre>
</div>
</div>
</section>
<section id="do-you-want-to-write-a-function" class="slide level2 smaller">
<h2>Do you want to write a function?</h2>
<ul>
<li>Let’s write our own function to extract point estimates and 95% CI from the model object.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>f_get_coefficients <span class="ot">&lt;-</span> <span class="cf">function</span>(model){</span>
<span id="cb25-2"><a href="#cb25-2"></a>  </span>
<span id="cb25-3"><a href="#cb25-3"></a>  <span class="co"># grab the names of the effects in the model</span></span>
<span id="cb25-4"><a href="#cb25-4"></a>  get_names <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">coef</span>(model))</span>
<span id="cb25-5"><a href="#cb25-5"></a>  </span>
<span id="cb25-6"><a href="#cb25-6"></a>  <span class="co"># grab the coefficients and the 95% confidence limits</span></span>
<span id="cb25-7"><a href="#cb25-7"></a>  <span class="co"># and put them in a matrix</span></span>
<span id="cb25-8"><a href="#cb25-8"></a>  estimates_and_cis <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="fu">coef</span>(model), <span class="fu">confint</span>(model))</span>
<span id="cb25-9"><a href="#cb25-9"></a>  </span>
<span id="cb25-10"><a href="#cb25-10"></a>  <span class="co"># put everything into a tibble and return it</span></span>
<span id="cb25-11"><a href="#cb25-11"></a>  <span class="fu">return</span>(<span class="fu">tibble</span>(<span class="at">term =</span> get_names, </span>
<span id="cb25-12"><a href="#cb25-12"></a>         <span class="at">estimate =</span> estimates_and_cis[,<span class="dv">1</span>],</span>
<span id="cb25-13"><a href="#cb25-13"></a>         <span class="at">lci =</span> estimates_and_cis[,<span class="dv">2</span>],</span>
<span id="cb25-14"><a href="#cb25-14"></a>         <span class="at">uci =</span> estimates_and_cis[,<span class="dv">3</span>]))</span>
<span id="cb25-15"><a href="#cb25-15"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="fu">f_get_coefficients</span>(lm_model1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  term                            estimate    lci    uci
  &lt;chr&gt;                              &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
1 (Intercept)                       119.   118.   119.  
2 factor(Education)Some College       3.75   2.65   4.85
3 factor(Education)High School        5.14   3.93   6.35
4 factor(Education)9 - 11th Grade     4.69   3.26   6.11
5 factor(Education)8th Grade          7.92   6.08   9.77</code></pre>
</div>
</div>
</section>
<section id="broomtidy" class="slide level2 smaller">
<h2>broom::tidy</h2>
<ul>
<li>The <code>broom</code> package has a function called <code>tidy</code> that extracts model output and puts it in tibble format</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>broom<span class="sc">::</span><span class="fu">tidy</span>(lm_model1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  term                            estimate std.error statistic  p.value
  &lt;chr&gt;                              &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)                       119.       0.391    303.   0       
2 factor(Education)Some College       3.75     0.559      6.71 2.09e-11
3 factor(Education)High School        5.14     0.619      8.30 1.23e-16
4 factor(Education)9 - 11th Grade     4.69     0.727      6.45 1.20e-10
5 factor(Education)8th Grade          7.92     0.941      8.41 4.86e-17</code></pre>
</div>
</div>
<ul>
<li>We can add the confidence limits to the tibble using the conf.int=TRUE argument</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>broom<span class="sc">::</span><span class="fu">tidy</span>(lm_model1, <span class="at">conf.int=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 7
  term                  estimate std.error statistic  p.value conf.low conf.high
  &lt;chr&gt;                    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)             119.       0.391    303.   0          118.      119.  
2 factor(Education)Som…     3.75     0.559      6.71 2.09e-11     2.65      4.85
3 factor(Education)Hig…     5.14     0.619      8.30 1.23e-16     3.93      6.35
4 factor(Education)9 -…     4.69     0.727      6.45 1.20e-10     3.26      6.11
5 factor(Education)8th…     7.92     0.941      8.41 4.86e-17     6.08      9.77</code></pre>
</div>
</div>

<aside><div>
<p>Tomorrow, we will build further on <code>broom::tidy</code> to create workflows that output regression output to tables.</p>
</div></aside></section>
<section id="subsetting-data-in-calls-to-lm" class="slide level2 smaller">
<h2>Subsetting data in calls to lm()</h2>
<ul>
<li>Many regression functions in <code>R</code> allow us to subset or restrict the data to a particular group</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a>lm_model1_female <span class="ot">&lt;-</span> <span class="fu">lm</span>(BPSysAve <span class="sc">~</span> <span class="fu">factor</span>(Education), </span>
<span id="cb32-2"><a href="#cb32-2"></a>                <span class="at">data=</span>df,</span>
<span id="cb32-3"><a href="#cb32-3"></a>                <span class="at">subset=</span>(Gender<span class="sc">==</span><span class="st">"female"</span>))</span>
<span id="cb32-4"><a href="#cb32-4"></a>broom<span class="sc">::</span><span class="fu">tidy</span>(lm_model1_female)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  term                            estimate std.error statistic  p.value
  &lt;chr&gt;                              &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)                       116.       0.568    204.   0       
2 factor(Education)Some College       5.20     0.811      6.42 1.60e-10
3 factor(Education)High School        6.42     0.904      7.10 1.57e-12
4 factor(Education)9 - 11th Grade     6.58     1.11       5.94 3.15e- 9
5 factor(Education)8th Grade          7.99     1.44       5.53 3.37e- 8</code></pre>
</div>
</div>
<ul>
<li>We could accomplish something similar by calling</li>
</ul>
<div class="sourceCode" id="cb34"><pre class="sourceCode numberSource r no-exec number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a>lm_model1_female <span class="ot">&lt;-</span> <span class="fu">lm</span>(BPSysAve <span class="sc">~</span> <span class="fu">factor</span>(Education), </span>
<span id="cb34-2"><a href="#cb34-2"></a>                <span class="at">data=</span>df <span class="sc">|&gt;</span> <span class="fu">filter</span>(Gender<span class="sc">==</span><span class="st">"female"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="restricting-to-non-missing-observations" class="slide level2 smaller">
<h2>Restricting to non-missing observations</h2>
<ul>
<li>Though most regression functions will automatically drop observations with <code>NA</code>, sometimes we may want to explicitly filter out missing observations on any of the covariates we are going to include while model building to make sure that we can compare models based on the same number of observations.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a>df_completecase <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb35-2"><a href="#cb35-2"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(BPSysAve) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(agecat) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(Gender) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(racecat))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="fitting-multiple-models" class="slide level2 smaller">
<h2>Fitting multiple models</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a>lm_model1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(BPSysAve <span class="sc">~</span> <span class="fu">factor</span>(</span>
<span id="cb36-2"><a href="#cb36-2"></a>  Education), </span>
<span id="cb36-3"><a href="#cb36-3"></a>                <span class="at">data=</span>df_completecase)</span>
<span id="cb36-4"><a href="#cb36-4"></a>lm_model2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(BPSysAve <span class="sc">~</span> <span class="fu">factor</span>(Education) <span class="sc">+</span> <span class="fu">factor</span>(agecat) <span class="sc">+</span> Gender, </span>
<span id="cb36-5"><a href="#cb36-5"></a>                <span class="at">data=</span>df_completecase)</span>
<span id="cb36-6"><a href="#cb36-6"></a>lm_model3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(BPSysAve <span class="sc">~</span> <span class="fu">factor</span>(Education) <span class="sc">+</span> <span class="fu">factor</span>(agecat) <span class="sc">+</span> Gender <span class="sc">+</span> <span class="fu">factor</span>(racecat), </span>
<span id="cb36-7"><a href="#cb36-7"></a>                <span class="at">data=</span>df_completecase)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="models-with-interactions" class="slide level2 smaller">
<h2>Models with interactions</h2>
<ul>
<li>We also think we should try to fit a model with an interaction between gender and racialized group</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a>lm_model4a <span class="ot">&lt;-</span> <span class="fu">lm</span>(BPSysAve <span class="sc">~</span> <span class="fu">factor</span>(Education) <span class="sc">+</span> <span class="fu">factor</span>(agecat) <span class="sc">+</span> Gender<span class="sc">*</span><span class="fu">factor</span>(racecat), </span>
<span id="cb37-2"><a href="#cb37-2"></a>                 <span class="at">data=</span>df_completecase)</span>
<span id="cb37-3"><a href="#cb37-3"></a>broom<span class="sc">::</span><span class="fu">tidy</span>(lm_model4a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 17 × 5
   term                                   estimate std.error statistic   p.value
   &lt;chr&gt;                                     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
 1 (Intercept)                             109.        0.598   183.    0        
 2 factor(Education)Some College             2.89      0.512     5.65  1.69e-  8
 3 factor(Education)High School              3.41      0.572     5.97  2.46e-  9
 4 factor(Education)9 - 11th Grade           2.67      0.677     3.94  8.31e-  5
 5 factor(Education)8th Grade                3.68      0.929     3.96  7.58e-  5
 6 factor(agecat)35-44                       4.06      0.616     6.59  4.83e- 11
 7 factor(agecat)45-54                       6.64      0.614    10.8   4.70e- 27
 8 factor(agecat)55-64                      12.7       0.649    19.6   8.15e- 83
 9 factor(agecat)65-74                      15.8       0.736    21.5   3.14e- 99
10 factor(agecat)75+                        23.8       0.832    28.7   6.50e-170
11 Gendermale                                3.70      0.477     7.74  1.11e- 14
12 factor(racecat)Black Non-Hispanic         4.79      0.903     5.30  1.18e-  7
13 factor(racecat)Hispanic                  -0.716     0.904    -0.792 4.28e-  1
14 factor(racecat)Other Non-Hispanic        -3.03      1.08     -2.81  4.95e-  3
15 Gendermale:factor(racecat)Black Non-H…   -0.758     1.30     -0.582 5.61e-  1
16 Gendermale:factor(racecat)Hispanic        1.40      1.19      1.18  2.39e-  1
17 Gendermale:factor(racecat)Other Non-H…    3.63      1.55      2.34  1.92e-  2</code></pre>
</div>
</div>
</section>
<section id="models-with-interactions-1" class="slide level2 smaller">
<h2>Models with interactions</h2>
<p><br></p>
<ul>
<li>When we specify the interaction in the formula using <code>*</code> we get the main effects of Gender and factor(racecat) as well as the interactions</li>
</ul>
</section>
<section id="models-with-interactions-2" class="slide level2 smaller">
<h2>Models with interactions</h2>
<ul>
<li>Another way to specify the interaction is to use the <code>interaction()</code> function to create a categorical variable representing the cross-classified categories</li>
<li>Useful when we want to compare to a common referent category.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a>lm_model4b <span class="ot">&lt;-</span> <span class="fu">lm</span>(BPSysAve <span class="sc">~</span> <span class="fu">factor</span>(Education) <span class="sc">+</span> <span class="fu">factor</span>(agecat) <span class="sc">+</span> <span class="fu">interaction</span>(Gender,<span class="fu">factor</span>(racecat)), </span>
<span id="cb39-2"><a href="#cb39-2"></a>                 <span class="at">data=</span>df_completecase)</span>
<span id="cb39-3"><a href="#cb39-3"></a>broom<span class="sc">::</span><span class="fu">tidy</span>(lm_model4b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 17 × 5
   term                                   estimate std.error statistic   p.value
   &lt;chr&gt;                                     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
 1 (Intercept)                             109.        0.598   183.    0        
 2 factor(Education)Some College             2.89      0.512     5.65  1.69e-  8
 3 factor(Education)High School              3.41      0.572     5.97  2.46e-  9
 4 factor(Education)9 - 11th Grade           2.67      0.677     3.94  8.31e-  5
 5 factor(Education)8th Grade                3.68      0.929     3.96  7.58e-  5
 6 factor(agecat)35-44                       4.06      0.616     6.59  4.83e- 11
 7 factor(agecat)45-54                       6.64      0.614    10.8   4.70e- 27
 8 factor(agecat)55-64                      12.7       0.649    19.6   8.15e- 83
 9 factor(agecat)65-74                      15.8       0.736    21.5   3.14e- 99
10 factor(agecat)75+                        23.8       0.832    28.7   6.50e-170
11 interaction(Gender, factor(racecat))m…    3.70      0.477     7.74  1.11e- 14
12 interaction(Gender, factor(racecat))f…    4.79      0.903     5.30  1.18e-  7
13 interaction(Gender, factor(racecat))m…    7.73      0.952     8.12  5.69e- 16
14 interaction(Gender, factor(racecat))f…   -0.716     0.904    -0.792 4.28e-  1
15 interaction(Gender, factor(racecat))m…    4.38      0.858     5.11  3.40e-  7
16 interaction(Gender, factor(racecat))f…   -3.03      1.08     -2.81  4.95e-  3
17 interaction(Gender, factor(racecat))m…    4.30      1.12      3.82  1.33e-  4</code></pre>
</div>
</div>
</section>
<section id="models-with-interactions-3" class="slide level2 smaller">
<h2>Models with interactions</h2>
<p>Another way to fit the interaction is with the <code>/</code> operator. In this example, it is giving us the racialized group effect WITHIN gender categories</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a>lm_model4c <span class="ot">&lt;-</span> <span class="fu">lm</span>(BPSysAve <span class="sc">~</span> <span class="fu">factor</span>(Education) <span class="sc">+</span> <span class="fu">factor</span>(agecat) <span class="sc">+</span> <span class="fu">factor</span>(racecat)<span class="sc">/</span>Gender, </span>
<span id="cb41-2"><a href="#cb41-2"></a>                 <span class="at">data=</span>df_completecase)</span>
<span id="cb41-3"><a href="#cb41-3"></a>broom<span class="sc">::</span><span class="fu">tidy</span>(lm_model4c)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 17 × 5
   term                                   estimate std.error statistic   p.value
   &lt;chr&gt;                                     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
 1 (Intercept)                             109.        0.598   183.    0        
 2 factor(Education)Some College             2.89      0.512     5.65  1.69e-  8
 3 factor(Education)High School              3.41      0.572     5.97  2.46e-  9
 4 factor(Education)9 - 11th Grade           2.67      0.677     3.94  8.31e-  5
 5 factor(Education)8th Grade                3.68      0.929     3.96  7.58e-  5
 6 factor(agecat)35-44                       4.06      0.616     6.59  4.83e- 11
 7 factor(agecat)45-54                       6.64      0.614    10.8   4.70e- 27
 8 factor(agecat)55-64                      12.7       0.649    19.6   8.15e- 83
 9 factor(agecat)65-74                      15.8       0.736    21.5   3.14e- 99
10 factor(agecat)75+                        23.8       0.832    28.7   6.50e-170
11 factor(racecat)Black Non-Hispanic         4.79      0.903     5.30  1.18e-  7
12 factor(racecat)Hispanic                  -0.716     0.904    -0.792 4.28e-  1
13 factor(racecat)Other Non-Hispanic        -3.03      1.08     -2.81  4.95e-  3
14 factor(racecat)White Non-Hispanic:Gen…    3.70      0.477     7.74  1.11e- 14
15 factor(racecat)Black Non-Hispanic:Gen…    2.94      1.21      2.42  1.55e-  2
16 factor(racecat)Hispanic:Gendermale        5.09      1.09      4.68  2.92e-  6
17 factor(racecat)Other Non-Hispanic:Gen…    7.33      1.48      4.96  7.07e-  7</code></pre>
</div>
</div>
</section>
<section id="predictions" class="slide level2 smaller">
<h2>Predictions</h2>
<ul>
<li><p>A common task we might want to do having fit a model is to generate model-based <strong>predictions</strong></p></li>
<li><p>We can use the predict() function to predict the fitted <code>BPSysAve</code> for everyone in the original dataset</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a><span class="co"># predicting on the original dataset</span></span>
<span id="cb43-2"><a href="#cb43-2"></a><span class="fu">head</span>(<span class="fu">predict</span>(lm_model4b, </span>
<span id="cb43-3"><a href="#cb43-3"></a>        <span class="at">interval =</span> <span class="st">"prediction"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       fit      lwr      upr
1 116.2887 85.47004 147.1074
2 116.2887 85.47004 147.1074
3 116.2887 85.47004 147.1074
4 118.7097 87.89539 149.5239
5 115.8203 85.00795 146.6326
6 115.8203 85.00795 146.6326</code></pre>
</div>
</div>
</section>
<section id="predictions-1" class="slide level2 smaller">
<h2>Predictions</h2>
<ul>
<li>We could also predict for a set of new observations</li>
<li>The new dataset to predict needs to contain values for all of the covariates that were included in the original model.</li>
<li>Here, we predict average systolic blood pressure for five women age 45-54 who are Black Non-Hispanic at each of the education levels.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a>data_to_predict <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Education =</span> <span class="fu">c</span>(<span class="st">"8th Grade"</span>, </span>
<span id="cb45-2"><a href="#cb45-2"></a>                                            <span class="st">"9 - 11th Grade"</span>, </span>
<span id="cb45-3"><a href="#cb45-3"></a>                                            <span class="st">"High School"</span>, </span>
<span id="cb45-4"><a href="#cb45-4"></a>                                            <span class="st">"Some College"</span>, </span>
<span id="cb45-5"><a href="#cb45-5"></a>                                            <span class="st">"College Grad"</span>),</span>
<span id="cb45-6"><a href="#cb45-6"></a>                      <span class="at">Gender =</span> <span class="fu">rep</span>(<span class="st">"female"</span>,<span class="dv">5</span>),</span>
<span id="cb45-7"><a href="#cb45-7"></a>                      <span class="at">agecat =</span> <span class="fu">rep</span>(<span class="st">"45-54"</span>, <span class="dv">5</span>),</span>
<span id="cb45-8"><a href="#cb45-8"></a>                      <span class="at">racecat =</span> <span class="fu">rep</span>(<span class="st">"Black Non-Hispanic"</span>, <span class="dv">5</span>))</span>
<span id="cb45-9"><a href="#cb45-9"></a></span>
<span id="cb45-10"><a href="#cb45-10"></a><span class="fu">print</span>(data_to_predict)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Education Gender agecat            racecat
1      8th Grade female  45-54 Black Non-Hispanic
2 9 - 11th Grade female  45-54 Black Non-Hispanic
3    High School female  45-54 Black Non-Hispanic
4   Some College female  45-54 Black Non-Hispanic
5   College Grad female  45-54 Black Non-Hispanic</code></pre>
</div>
</div>
</section>
<section id="predictions-2" class="slide level2 smaller">
<h2>Predictions</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a><span class="fu">predict</span>(lm_model4b, </span>
<span id="cb47-2"><a href="#cb47-2"></a>        <span class="at">newdata=</span>data_to_predict,</span>
<span id="cb47-3"><a href="#cb47-3"></a>        <span class="at">interval =</span> <span class="st">"confidence"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       fit      lwr      upr
1 124.2857 121.8173 126.7540
2 123.2756 121.2338 125.3175
3 124.0219 122.0992 125.9446
4 123.4971 121.6112 125.3830
5 120.6077 118.6939 122.5215</code></pre>
</div>
</div>
</section>
<section id="predictions-using-broomaugment" class="slide level2 smaller">
<h2>Predictions using broom::augment()</h2>
<ul>
<li>The <code>broom</code> package can also do this for us using the <code>augment()</code> function</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a>broom<span class="sc">::</span><span class="fu">augment</span>(lm_model4b, <span class="at">newdata=</span>data_to_predict, <span class="at">interval =</span> <span class="st">"confidence"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 7
  Education      Gender agecat racecat            .fitted .lower .upper
  &lt;chr&gt;          &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;                &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
1 8th Grade      female 45-54  Black Non-Hispanic    124.   122.   127.
2 9 - 11th Grade female 45-54  Black Non-Hispanic    123.   121.   125.
3 High School    female 45-54  Black Non-Hispanic    124.   122.   126.
4 Some College   female 45-54  Black Non-Hispanic    123.   122.   125.
5 College Grad   female 45-54  Black Non-Hispanic    121.   119.   123.</code></pre>
</div>
</div>
<p>Note that both <code>predict()</code> and <code>broom::augment()</code> can compute <strong>confidence</strong> intervals and <strong>prediction</strong> intervals</p>
</section>
<section id="model-fit-statistics" class="slide level2 smaller">
<h2>Model fit statistics</h2>
<ul>
<li>We can also look at a variety of model fit statistics using <code>broom::glance()</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a><span class="fu">bind_rows</span>(broom<span class="sc">::</span><span class="fu">glance</span>(lm_model1),</span>
<span id="cb51-2"><a href="#cb51-2"></a>  broom<span class="sc">::</span><span class="fu">glance</span>(lm_model2),</span>
<span id="cb51-3"><a href="#cb51-3"></a>  broom<span class="sc">::</span><span class="fu">glance</span>(lm_model3),</span>
<span id="cb51-4"><a href="#cb51-4"></a>  broom<span class="sc">::</span><span class="fu">glance</span>(lm_model4b)) <span class="sc">|&gt;</span></span>
<span id="cb51-5"><a href="#cb51-5"></a>  <span class="fu">bind_cols</span>(<span class="fu">c</span>(<span class="st">"Model 1"</span>, <span class="st">"Model 2"</span>, <span class="st">"Model 3"</span>, <span class="st">"Model 4"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 13
  r.squared adj.r.squared sigma statistic   p.value    df  logLik    AIC    BIC
      &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
1    0.0189        0.0182  17.3      30.4 4.46e- 25     4 -26991. 53994. 54035.
2    0.183         0.182   15.8     142.  1.78e-268    10 -26411. 52847. 52928.
3    0.190         0.188   15.7     114.  2.11e-276    13 -26386. 52801. 52902.
4    0.191         0.189   15.7      92.9 6.73e-275    16 -26382. 52800. 52921.
# ℹ 4 more variables: deviance &lt;dbl&gt;, df.residual &lt;int&gt;, nobs &lt;int&gt;,
#   ...13 &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="comparing-models" class="slide level2 smaller">
<h2>Comparing models</h2>
<ul>
<li>You may recall from statistics classes that we can compare two nested linear regression models.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a><span class="fu">anova</span>(lm_model4b, lm_model3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Model 1: BPSysAve ~ factor(Education) + factor(agecat) + interaction(Gender, 
    factor(racecat))
Model 2: BPSysAve ~ factor(Education) + factor(agecat) + Gender + factor(racecat)
  Res.Df     RSS Df Sum of Sq      F  Pr(&gt;F)  
1   6307 1556063                              
2   6310 1557850 -3   -1787.3 2.4148 0.06461 .
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
</section>
<section id="some-take-aways" class="slide level2 smaller">
<h2>Some take aways</h2>
<ul>
<li><p>Like everything in <code>R</code>, when we fit regression models we assign the results to an <strong>object</strong> that we can then manipulate to extract the most relevant pieces of output</p></li>
<li><p>These are essentially <strong>list</strong> objects that contain different elements</p></li>
<li><p>Don’t be afraid to poke around and explore what are the elements of the model object.</p></li>
<li><p>We can often write our own <strong>functions</strong> to help us extract the elements we’re interested in.</p></li>
<li><p>The <code>broom</code> package, by David Robinson, has lots of powerful functions to turn models into tidy data. Once you have tidy data, you can manipulate them using many of the techniques you’ve been learning for managing dataframes and tibbles.</p></li>
</ul>
</section>
<section id="further-reading" class="slide level2 smaller">
<h2>Further reading</h2>
<ul>
<li><p>Introduction to <code>broom</code> https://cran.r-project.org/web/packages/broom/vignettes/broom.html</p></li>
<li><p><code>broom.mixed</code> documentation (useful if you are fitting random effects or mixed models) https://cran.r-project.org/web/packages/broom.mixed/vignettes/broom_mixed_intro.html</p></li>
</ul>

<img src="images/id529-sticker.png" class="slide-logo r-stretch"><div class="footer footer-default">

</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="id529_day4_regression_slides_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="id529_day4_regression_slides_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="id529_day4_regression_slides_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="id529_day4_regression_slides_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="id529_day4_regression_slides_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="id529_day4_regression_slides_files/libs/revealjs/plugin/reveal-pointer/pointer.js"></script>
  <script src="id529_day4_regression_slides_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="id529_day4_regression_slides_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="id529_day4_regression_slides_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="id529_day4_regression_slides_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="id529_day4_regression_slides_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'pointer': {"key":"q","color":"red","pointerSize":16,"alwaysVisible":false},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealPointer, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>